<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VectorizeIt - Depuración</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        #dropzone { border: 2px dashed #ccc; padding: 20px; text-align: center; }
        #preview { margin-top: 20px; }
        .image-container { display: inline-block; width: 45%; margin: 10px; }
        .image-label { text-align: center; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>VectorizeIt - Depuración</h1>

        <div id="upload-container">
            <div id="dropzone">
                Arrastra y suelta una imagen aquí, o haz clic para seleccionar un archivo
            </div>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
        </div>

        <div id="preview" style="display: none;">
            <div class="image-container">
                <img id="originalImage" alt="Imagen Original">
                <div class="image-label">Imagen Original</div>
            </div>
        </div>

        <div id="log"></div>
    </div>

    <script>
        const dropzone = document.getElementById('dropzone');
        const fileInput = document.getElementById('fileInput');
        const preview = document.getElementById('preview');
        const originalImage = document.getElementById('originalImage');
        const logDiv = document.getElementById('log');

        function log(message) {
            console.log(message);
            logDiv.innerHTML += message + '<br>';
        }

        dropzone.addEventListener('click', () => fileInput.click());
        dropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            e.stopPropagation();
        });
        dropzone.addEventListener('drop', handleDrop);
        fileInput.addEventListener('change', handleFileSelect);

        function handleDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            log('Archivo soltado');
            const file = e.dataTransfer.files[0];
            processFile(file);
        }

        function handleFileSelect(e) {
            log('Archivo seleccionado');
            const file = e.target.files[0];
            processFile(file);
        }

        function processFile(file) {
            if (!file) {
                log('No se seleccionó ningún archivo');
                return;
            }
            log(`Procesando archivo: ${file.name}`);
            
            const reader = new FileReader();
            reader.onload = (event) => {
                log('Archivo leído correctamente');
                originalImage.src = event.target.result;
                preview.style.display = 'block';
                log('Imagen mostrada en preview');
            };
            reader.onerror = (error) => {
                log(`Error al leer el archivo: ${error}`);
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
